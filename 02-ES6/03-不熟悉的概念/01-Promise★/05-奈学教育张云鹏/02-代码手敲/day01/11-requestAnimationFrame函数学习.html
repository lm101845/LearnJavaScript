<!--
 * @Author: liming
 * @Date: 2022-01-15 21:10:05
 * @LastEditTime: 2022-01-15 21:16:57
 * @FilePath: \05-奈学教育张云鹏\02-代码手敲\day01\11-requestAnimationFrame函数学习.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <script>
        //requestAnimationFrame这个函数是为视图处理动画提供的
        /**
         * 网页之所以能提供动画，是因为网页每秒有60帧的刷新率，包括浏览器也有每秒60帧的刷新率，
         * setTimeout函数是人工触发的，也就是我们加载代码时从0开始计算，
         * requestAnimationFrame是靠获取浏览器刷新的时钟信号来决定执行时机的
         * 注意：异步函数有一部分是我们主动触发的，而有一部分是获取时钟信号来触发的
         */
        let i = 0;
        let d = new Date().getTime();
        let d1 = new Date().getTime();

        function loop() {
            d1 = new Date().getTime();
            i++;
            //当间 隔时间超过1秒时执⾏
            if (d1 - d >= 1000) {
                d = d1;
                console.log(i);
                i = 0;
                console.log("经过了1秒");
            }
            requestAnimationFrame(loop);
            //这个函数相当于每秒钟执行60次左右

            //setTimeout(loop, 0)
            //setTimeout每秒执行了200多次
        }
        loop();
    </script>
</body>

</html>